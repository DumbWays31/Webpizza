{% extends 'applipizza/base.html' %}

{% block title %}
détails d'une pizza
{% endblock %}

{% block main %}
<h2> Voici notre pizza </h2>
<p>{{ pizza }}</p>

{% if ingredients_list %}
    <h3>Ingrédients :</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Ingredient</th>
                <th>Quantité</th>
            </tr>
        </thead>
        <tbody>
            {% for ingredient in ingredients_list %}
                <tr>
                    <td>{{ ingredient.nom }}</td>
                    <td>{{ ingredient.quantite }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p><b>La pizza {{ pizza.nomPizza }} n'a pas encore d'ingrédients :( </b></p>
{% endif %}

<h2>Ajouter un ingrédient</h2>
<form action="/pizzas/{{pizza.idPizza}}/addIngredient/" method="post">
    {% csrf_token %}
    <div class="mb-3">
        <label for="id_ingredient" class="form-label">ingrédient</label>
        <select name="ingredient" class="form-select" required id="id_ingredient">
            <option selected disabled>choisissez un ingrédient</option>
            {% for ing in lesIng %}
            <option value="{{ing.idIngredient}}">{{ing.nomIngredient}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="id_quantite" class="form-label">Quantité</label>
        <input type="text" name="quantite" class="form-control" maxlength="100" required id="id_quantite">
    </div>
    <button type="submit" class="btn btn-primary">Envoyer</button>
</form>

{% endblock %}
